{"version":3,"sources":["../../src/pages/pedidos/pedidos.module.ts","../../src/pages/pedidos/pedidos.ts","../../src/app/models/enderecoModel.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PedidosPage } from './pedidos';\n\n@NgModule({\n  declarations: [\n    PedidosPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PedidosPage),\n  ],\n})\nexport class PedidosPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pedidos/pedidos.module.ts","import { IonicPage, NavController, NavParams, ActionSheetController } from 'ionic-angular';\nimport { ListaPedidosModel } from '../../app/models/ListaPedidosModel';\nimport { ConfigHelper } from '../../app/helpers/configHelper';\nimport { HttpProvider } from \"./../../providers/http/http\";\nimport { HttpResultModel } from \"../../app/models/HttpResultModel\";\nimport { Component } from \"@angular/core\";\nimport { ProdutoModel } from '../../app/models/produtoModel';\nimport { AlertProvider } from '../../providers/alert/alert';\nimport { EnderecoEntregaModel } from './../../app/models/enderecoModel';\nimport { OperadorModel } from '../../app/models/operadorModel';\nimport firebase from 'firebase';\nimport { OperadorProvider } from '../../providers/operador/operador';\n\n@IonicPage()\n@Component({\n  selector: 'page-pedidos',\n  templateUrl: 'pedidos.html',\n})\nexport class PedidosPage {\n  produtos: ProdutoModel;\n  // enderecoEntregaId: any;\n  pedidos: Array<ListaPedidosModel> = new Array<ListaPedidosModel>();\n  enderecoEntrega = new EnderecoEntregaModel;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public actionSheetCtrl: ActionSheetController,\n    public http: HttpProvider,\n    private alertSrv: AlertProvider) {\n\n  }\n\n  mensagens(model?: ListaPedidosModel): void {\n    this.navCtrl.push('MensagensPage', { _pedido: model });\n    console.log(\"model\", model);\n  }\n\n\n  salvarPedido(model?: ListaPedidosModel): Promise<HttpResultModel> {\n    let pedidosResult = this.http.put(`${ConfigHelper.Url}pedido/${model._id}`, model)\n    console.log(pedidosResult);\n    console.log(model);\n    console.log(\"teste\");\n    return pedidosResult;\n  };\n\n  aceitar(model?: ListaPedidosModel): Promise<HttpResultModel> {\n    if (model.status !== \"Aguardando\") {\n      this.alertSrv.toast('Este pedido já foi recusado ou aceito!', 'bottom');\n      return;\n    }\n    model.status = \"Pedido Aceito\";\n    let pedidosResult = this.http.put(`${ConfigHelper.Url}pedido/${model._id}`, model)\n    this.enviarMensagem(model.usuarioId, \"Woooooooosh! Seu pedido foi aceito, já estamos preparando ele e assim que sair para a entrega te avisamos aqui ;)\")\n    this.alertSrv.toast('Pedido aceito com sucesso!', 'bottom');\n    return pedidosResult;\n  };\n\n  recusar(model?: ListaPedidosModel): Promise<HttpResultModel> {\n    if (model.status !== \"Aguardando\") {\n      this.alertSrv.toast('Este pedido já foi recusado ou aceito!', 'bottom');\n      return;\n    }\n    model.status = \"Pedido Recusado\";\n    let pedidosResult = this.http.put(`${ConfigHelper.Url}pedido/${model._id}`, model)\n    this.enviarMensagem(model.usuarioId, \"Lamentamos mas seu pedido foi recusado :(\")\n    this.alertSrv.toast('Pedido recusado com sucesso!', 'bottom');\n    return pedidosResult;\n  };\n\n  saiuEntrega(model?: ListaPedidosModel): Promise<HttpResultModel> {\n    if (model.status === \"Pedido Recusado\") {\n      this.alertSrv.toast('Este pedido foi recusado!', 'bottom');\n      return;\n    }\n    if (model.status === \"Saiu para Entrega\") {\n      this.alertSrv.toast('Já definido como \"Saiu para Entrega\"!', 'bottom');\n      return;\n    }\n    model.status = \"Saiu para Entrega\";\n    let pedidosResult = this.http.put(`${ConfigHelper.Url}pedido/${model._id}`, model)\n    this.enviarMensagem(model.usuarioId, \"Seu pedido saiu para entrega :D\")\n    this.alertSrv.toast('Definido como \"Saiu para entrega\" sucesso!', 'bottom');\n    return pedidosResult;\n  };\n\n  ionViewDidLoad() {\n    this.GetAllPedidos();\n    console.log(this.produtos);\n  }\n\n  adminOptions(): void {\n    let action = this.actionSheetCtrl.create({\n      title: \"Administração\",\n      buttons: [\n        {\n          text: \"Gerenciar Categorias\",\n          handler: () => {\n            this.gerenciarCategoria();\n          }\n        },\n        {\n          text: \"Gerenciar Produtos\",\n          handler: () => {\n            this.gerenciarProduto();\n          }\n        },\n        {\n          text: \"Gerenciar Clientes\",\n          handler: () => {\n            this.gerenciarCliente();\n          }\n        },\n        {\n          text: \"Gerenciar Operadores\",\n          handler: () => {\n            this.gerenciarOperador();\n          }\n        },\n        {\n          text: \"Sair da conta\",\n          handler: () => {\n            this.sair();\n          }\n        },\n        { text: \"Cancelar\", handler: () => { }, role: \"destructive\" }\n      ]\n    });\n    action.present();\n  }\n\n  private gerenciarCategoria(): void {\n    this.navCtrl.push(\"AdmCategoriasPage\");\n  }\n\n  private gerenciarOperador(): void {\n    this.navCtrl.push(\"OperadoresPage\");\n  }\n\n  private gerenciarProduto(): void {\n    this.navCtrl.push(\"AdmProdutosPage\");\n  }\n\n  private gerenciarCliente(): void {\n    this.navCtrl.push(\"ClientesPage\");\n  }\n\n  // clienteInfo(model?: UsuarioModel): void {\n  //   this.navCtrl.push('AdmClientePage', { _cliente: model });\n  //   console.log(\"model\", model);\n  // }\n\n  sair() {\n    try {\n      this.alertSrv.confirm(\n        \"Sair\",\n        \"Deseja realmente sair de sua Conta atual?\",\n        async () => {\n          if (this.alertSrv) {\n            localStorage.clear();\n            this.navCtrl.push(\"LoginPage\");\n          }\n        }\n      );\n    } catch (error) {\n      console.log(\"Erro ao excluir\", error);\n    }\n  }\n\n  private async GetAllPedidos(): Promise<HttpResultModel> {\n    try {\n      let pedidosResult = await this.http.get(`${ConfigHelper.Url}pedido/getAll`);\n      if (pedidosResult.success) {\n        this.pedidos = <Array<ListaPedidosModel>>pedidosResult.data;\n        console.log(this.pedidos);\n        return pedidosResult;\n      }\n    } catch (error) {\n      console.log('Problema ao carregar os pedidos, motivo: ', error);\n    }\n  }\n\n  enviarMensagem(idUser: string, mensagem: string) {\n    let op: OperadorModel = OperadorProvider.GetOperador();\n    let newData = firebase\n      .database()\n      .ref(\"chats/mensagens/\" + idUser)\n      .push();\n    newData.set({\n      type: \"operadorMessage\",\n      user: op.nome,\n      userID: null,\n      mensagem: mensagem,\n      sendDate: Date()\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pedidos/pedidos.ts","export class EnderecoEntregaModel {\n  _id: string;\n  bairro: string;\n  rua: string;\n  numero: string;\n  pontoReferencia: string;\n  orientacoes: string;\n  cidade: string;\n  uf: string;\n  cep: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/models/enderecoModel.ts"],"sourceRoot":""}